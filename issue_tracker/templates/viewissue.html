{% extends 'base.html' %} 
{% load bootstrap_tags %}
{% block title %}View Issue{% endblock %}
{% block content %}
<div class="row">
    {% if issue.image %}
    <div class="col-xs-12 col-md-3">
        <div class=" view-image view-issue-template" style="background: url('{{ MEDIA_URL }}{{ issue.image }}');"></div>
    </div>
    {% else %}
    <div class="col-xs-12 col-md-3 justify-content-center">
        <div class="view-image view-issue-image" style="background: #eee;"></div>
    </div>
    {% endif %}
    <div class="col-xs-12 col-md-9 text-center">
        <h3>{{ issue.author }}</h3>
    </div>
</div>
<br>
<div class="row">
    <div class="col-xs-12">
        <h1>{{ issue.title }}</h1>
    </div>
    </div>
</div>
<div class="row">
    <div class="col-xs-6 text-center">
        <p>{{ issue.tag }}</p>
    </div>
    <div class="col-xs-6 text-center">
        <p>{{ issue.published_date }}</p>
    </div>
</div>
<br>
<div class="row view-issue-votes-content">
    <div class="col-xs-3 text-center">
        <form method="POST">
        {% csrf_token %}
        <button class="glyphicon glyphicon-chevron-up votes-chevron-btn" name="votes"></button>
        <h3>{{ issue.votes }}</h3>
        </form>
    </div>
    <div class="col-xs-9 view-issue-content">
        <pre>{{ issue.content }}</pre>
    </div>
</div>
{% if issue.author == request.user %}
<div class="row">
    <div class="col-xs-6">
        <a href="{% url 'edit_issue' issue.id %}" class="btn btn-default">Edit Issue</a>
    </div>
     <div class="col-xs-6 text-right">
        <a href="{% url 'delete_issue' issue.id %}" class="btn btn-default delete-issue">Delete Issue</a>
    </div>
</div>
{% endif %}
<a href="" type="button" data-toggle="modal" data-target="#myModal">Add comment</a>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Write a comment</h4>
      </div>
      <div class="modal-body">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            {{ comment_form | as_bootstrap }}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Save comment</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% for comment in comments_with_images %}
<div class="row">
    <div>
        {% if comment.image.url != None %}
        <img src="{{ comment.image.url }}" alt="" style="width: 5rem; height: 5rem; border-radius: 50%;">
        {% else %}
        <div style="background-color: #eee; width: 5rem; height: 5rem; border-radius: 50%;"></div>
        {% endif %}
    </div>
    <blockquote>
        <p>{{ comment.comment.content }}</p>
        <footer>by <cite title="Source Title">{{ comment.comment.user_logged_in }}</cite></footer>
    </blockquote>
</div>
{% endfor %}
{% endblock %}
